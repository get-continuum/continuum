FROM python:3.12-slim

WORKDIR /app

# Install SDK from local source
COPY oss/sdk/python /build/sdk
RUN pip install --no-cache-dir /build/sdk

# Install demo API from local source
COPY demo/api /build/api
RUN pip install --no-cache-dir /build/api

# Copy API entrypoint
COPY demo/api/main.py /app/main.py

ENV CONTINUUM_STORE=/data/.continuum

EXPOSE 8000

CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
